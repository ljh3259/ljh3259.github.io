---
layout: post
title:  "오브젝트 읽기 5장  책임 할당하기"
date:   2020-01-12 12:07:00 +0900
categories: book
---

# 5장  책임 할당하기

- 데이터 중심 설계로 인해 발생하는 줌제점을 해결할 수 있는 가장 기본적인 방법?
	- 책임에 초첨을 맞추는 것이다.
- **그렇다면 어떤 객체에게 어떤 책임을 할당해야 할까?**
- 책임 할당 과정은 일종의 트레이드 오프 활동이다.
- GRASP 패턴?


# 01. 책임 주도 설계를 향해
- 데이터 중심 -> 책임 중심 설계로 전환하기 위한 두가지 원칙
	1. 데이터보다 행동을 먼저 결정하라.
	2. 협력이라는 문맥 안에서 책임을 결정하라.

## 첫번째 원칙 : 데이터보다 행동을 먼저 결정하라.
- 책임 중심 설계
	- 이 객체가 수행해야 하는 책임은 무엇인가? 를 결정한 후에 책임을 수행하는 데 필요한 데이터는 무엇인가를 결정한다.
	- 즉 책임을 먼저 결정한 후에 객체의 상태를 결정한다는 것이다.
- 해결의 실마리 ?
	- **협력** 에서 찾을 수 있다.
	- 그럼 협력을 알면 책임을 결정할수 있다는 거겠지?
	- **(2번째 원칙이 협력이라는 문맥안에서 책임을 결정하라 이다.)**

## 두번째 원칙 : 협력이라는 문맥 안에서 책임을 결정하라.
- 협력을 시작하는 주체는 메시지 전송자이기 때문에 협력에 적합한 책임이란? 메시지 수신자가 아니라 **메시지 전송자** 에게 적합한 책임을 의미한다.
    - 생각하지 못했다.
- 협력에 적합한 책임을 수확하기 위해서는 메시지를 결정한 후에 객체를 선택해야한다.
- 객체가 메시지를 선택하는 것이 아니라 메시지가 객체를 선택하게 해야 한다.
- 객체에 책임을 할당하기전에 메시지를 먼저 결정하라.
- 이렇게 질문(접근)하자
    - 메시지를 전송해야 하는데 누구에게 전송해야 하지?

# 02. 책임 할당을 위한 GRASP 패턴
### GRASP 패턴이 뭔데?
- 책임 할당 기법
- General Responsibility Assignment Software Pattern
- 일반적인 책임 할당을 위한 소프트웨어 패턴
- 책임을 할당할 때 지침으로 삼을 수 있는 원칙들의 집합을 패턴 형식으로 정리한 것.

## 도메인 개념에서 출발하기
- 설계를 시작하기 전에 도메인에 대한 개략적인 모습을 그려 보는 것이 유용하다.
- 설계를 시작하는 단계에서는 **개념들의 의미와 관계가 정확하거나 완벽할 필요가 없다.** 
	- 설계를 진행해나가면서 다져가는건가?
	- 설계를 시작하기 위해 참고할 수 있는 개념들의 모음 정도로 간주하라.
	- P137 5.1 그림 참고
###  중요한 것은 설계를 시작하는 것이지 도메인 개념들을 완벽하게 정리하라는 것이 아니다.
- 위 말이 중요한거같다 설계 시작단계의 목적은 설계를 시작하는 것이다. 
    - 난 가끔 정작 중요한 맥락을 벗어나는 경우가 있다. 이점 주의하자.
- 올바른 도메인 모델이란 존재하지 않는다.
	- 두 도메인 모델 모두 올바른 구현을 이끌어낼 수만 있다면 정답은 ‘둘 다’ 다.
- 필요한 것은 도메인을 그대로 투영한 모델이 아니라 **구현에 도움이 되는 모델**이다.

## 정보 전문가에게 책임을 할당하라.
- 책임 주도 설계 방식의 첫 단계는 애플리케이션이 제공해야 하는 기능을 애플리케이션의 책임으로 생각하는 것이다.

### 책임 주도 설계 방식
1. 메시지를 전송할 객체는 무엇을 원하는가?
	1. 원하는 기능을 생각하면 무엇을 원하는지 알수 있겠다.
2. 메시지를 수신할 적합한 객체는 누구인가?
	1. 이부분이 항상 고민이다.
	2. **책임을 수행할 정보를 알고 있는 객체에게 책임을 할당하라.**
	3. GRASP -> INFORMATION EXPERT(정보 전문가) 패턴이라 부른다.

- **INFORMATION EXPERT 패턴**
	- 필요한 정보를 가장 많이 알고 있는 객체에게 예매하라 메시지를 처리할 책임을 할당해야 한다.
	- 객체에게 책임을 할당할 때 가장 기본이 되는 책임 할당 원칙이다.
	- 상영은 영화예매에 필요한 다양한 정보를 알고 있다.
	- 따라서 영화 예매를 위한 정보 전문가 이다.

- 너무 세세한 부분까지 고민할 필요는 없다.
	- 메시지를 받은 객체(책임을 부여받은) 가 책임을 수행하는데 필요한 작업을 구상해보고 스스로 처리할 수 없는 작업이 무엇인지 가릴 정도의 수준이면된다.

- 스스로 처리할 수 없는 작업이 있다면 외부에 도움을 요청해야한다.
	- 이것이 새로운 메시지가 된다.
 


## 높은 응집도와 낮은 결합도
- HIGH COHESION, LOW COUPLING 패턴
- 책임 할당을 검토하거나 여러 설계 대안들이 있을 때 낮은 결합도/높은 응집도를 유지할 수 있는 설계를 선택하라.
- 설계 결정을 평가할 때 적용할 수 있는 **평가원리**다.
	- 책임을 할당 및 따져봐야할때 결합도/응집도를 고려하자.

- 서로 다른 이유로 변경되는 책임을 짊어진다 -> 응집도가 낮다.
	- 높은 응집도를 어떻게 유지해야할까?를 잘 표현하는 문구다.
- **재사용 가능하고 유연한 설계(변경에 수월한)를 얻기위해 높은응집도, 낮은 결합도를 고려하자.**

## 창조자에게 객체 생성 책임을 할당하라.
- CREATOR(창조자) 패턴
	- 객체를 생성할 책임을 어떤 객체에게 할당할지에 대한 지침을 제공한다.
- 협력과 책임이 제대로 동작하는지 확인할 수 있는 유일한 방법은 코드를 작성하고 실행해 보는 것뿐이다.


# 03. 구현을 통한 검증
- 코드 베이스 설명이 많아 git repo로 대체한다.
	- [GitHub - ljh3259/blog-repository](https://github.com/ljh3259/blog-repository)

